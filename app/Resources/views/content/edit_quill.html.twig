{# templates/text/update.html.twig #}

{% import 'macros.twig' as m %}

{% extends 'admin.html.twig' %}

{% block stylesheets %}
{{ parent() }}
<link href="{{ asset('css/content/edit_alt.css') }}" rel="stylesheet" />
<link href="{{ asset('css/form.css') }}" rel="stylesheet" />

<link href="https://cdn.quilljs.com/1.0.0/quill.snow.css" rel="stylesheet">
    {% endblock %}
    
    {% block js %}
    {{ parent() }}
    <script src="https://cdn.quilljs.com/1.0.0/quill.js"></script>
     <script>
 
     function clickimage(Iid,label)
     {
       putImage(Iid);
     }
     
   
 </script>
    {% endblock %}
    
    {% block middle %}
    <div id="contentedit" >
        
        <div class="heading">
            <div class="label" >{{ 'edit.contents' | trans }} </div>
            <div class="title" >{{ content.title}} : {{content.contentid}} </div>
            <div class="returnbutton button1"> <a href = {{returnlink}} >{% trans %} annuler {% endtrans%} </a> </div>
        </div> 
        <div class="form">
            <form action="/admin/content/process_edit/{{content.contentid}}" method="post" >
                <div class="row" >
                    <label for="subjectid">SubjectId:</label>
                    <input type="text" id="subjectid" name="_subjectid" value="{{ content.subjectid }}" disabled />
                </div>
                <div class="row" >
                    <label for="language">Language:</label>
                    <input type="text" id="username" name="_language" value="{{ content.language}}" disabled />
                </div>
                <div class="row" >
                    <label for="title">Title:</label>
                    <input type="text" id="title" name="_title" value="{{ content.title }}" />
                </div>
                <label for="content">Text:</label>
                <input type="hidden" name="_text" value="{{ content.text  }}" >
                    
                    <button type="submit" id="submitbutton" style="display: none;"  >{% trans %} enregistrer {% endtrans%} </button> 
                    
                </form>
                
                
                <div id="editortext"   >
                    {{ content.text | raw }}
                </div>
                
                
                
                
                
            </div>
             <button onclick="saveform()">{{ 'Click.me' | trans }}</button>  
        </div>
        
        {% endblock %}
        
        
        {% block right %}
        {{ render(controller('AppBundle\\Controller\\BookmarkController::setfield'))}}
        {% endblock%}
        
        
        {% block end %}
<script>
var Block = Quill.import('blots/block');


var quill = new Quill('#editortext', {
    modules: {
        toolbar: [
        [{ header: [1, 2, false] }],
        ['bold', 'italic', 'underline'],
        [ 'blockquote'],
        [{ list: 'ordered' }, { list: 'bullet' }],
        [{ 'indent': '-1'}, { 'indent': '+1' }] ,
        ]
    },
    placeholder: 'Votre contribution au FFLSAS site',
    theme: 'snow'
});


function saveform() 
{
    var hiddentext = document.querySelector('input[name=_text]');
    var edstring = quill.root.innerHTML;
    //alert(edstring);
    hiddentext.value =   edstring;
    var submitButton = document.getElementById("submitbutton");
    submitButton.click(); //
}

function putImage(imageid)
{
    var range = quill.getSelection(true);
    if (range) 
    {
        if (range.length == 0) 
        { 
            quill.insertText(range.index, '[["image":'+imageid+',"width":200]]', 'bold', true); 
        }
    }     
}

</script>

<script src="https://code.jquery.com/jquery-3.2.1.js"></script>


{% endblock %}
