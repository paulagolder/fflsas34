{# templates/event/editone.html.twig #}

{% extends 'admin.html.twig' %}

{% block stylesheets %}
      {{ parent() }}
   <link href="{{ asset('/css/event/editone.css') }}" rel="stylesheet" />
 {% endblock %}

 {% block js %}
 {{ parent() }}
 <script>
    
     function clicklocation(lid)
     {
      window.location.href = '/admin/event/setlocation/{{objid}}/'+lid;
     }
     
     function clickimage(iid)
     {
        window.location.href = '/admin/event/addimage/{{objid}}/'+iid;
     }
     
     function clickperson(pid)
     {
        window.location.href = '/admin/event/addparticipant/{{objid}}/'+pid;
     }
     
     function clickcontent(cid)
     {
        window.location.href = '/admin/event/addcontent/{{objid}}/'+cid;
     }
     
   </script>
{% endblock %}


{% block middle %}
  <div id="editevent">
   {% if message %}
     <h1> {{message}}</h1>
   {% endif %}

   {% if event is defined %}
   {% if event.ancestors %}
       {% set ancestors = event.ancestors %}
        <div  class="breadcrumbs">
          {% for key in ancestors | keys %}
           => <a href='{{ancestors[key].link}}' >{{ancestors[key].title}} </a> 
          {% endfor %}
        </div>
   {% endif %} 
  
   <div class="heading">
     <div class="label"> {{'event.a.editer' | trans}}</div>
     <div class='title' >{{ event.title}}</div>
     <div class="editbutton button1" ><a href="/admin/event/detail/{{event.eventid}}"> {{"edit.event.detail" | trans }} </a></div>
     <div class="editbutton " ><a href="/admin/event/addbookmark/{{event.eventid}}"> {{"bookmark.event" | trans }} </a></div>
     <div class="returnbutton" ><a href="{{returnlink}}"> {{"retour" | trans }} </a></div>
   </div>
   
   {% if ( event.startdate is defined ) or (event.enddate is defined )%}
     <div class="dates" > {{ event.startdate}} : {{ event.enddate}} </div>
   {% endif %}
   
   
      <div class="location heading" > 
      <div class="label" >{{ 'Endroit' | trans }}</div>
                <div class="tooltip">?  <span class="tooltiptext">{{ 'to.add.location.use.bookmarks' | trans }}</span>
              </div>
                {% if event.locid %}
      <div ><a href ="{{ event.location['link'] }}"> {{ event.location['name'] }}</a> </div>
          {% endif  %}
      </div>

     
    
     <div class="imagegroup" >
          <div class="label" > {{ 'images' | trans }} </div>  
          <div class="tooltip">?  <span class="tooltiptext">{{ 'to.add.images.use.bookmarks' | trans }}</span>
              </div>
               {% if images %}
            <div class="images">
                {% for image in images %}
                <div class="image">
                    <div class="imageimage" ><a href="{{image.link}}" ><img src="{{image.fullpath}}" /></a></div>
                    <div class="imagedelete deletebutton" ><a href="/admin/event/removeimage/{{event.eventid}}/{{image.refid}}">{%trans%}delete{%endtrans%}</a></div>
                </div>
                {% endfor %}
             </div>
                {% endif %}  
      </div>
       
            
     <div class="refgroup" >
     <div class="header">
     <div class="label"> {{'Liens' | trans}}</div>
     <div class="tooltip">?  <span class="tooltiptext">{{ 'to.add.link.use.bookmarks' | trans }}</span>
              </div>
     <div class="editbutton first" ><a href="/admin/linkref/editevent/{{event.eventid}}">{{'edit.refs' | trans }}</a></div>
     </div>
      <div class="reflist">
    {% for ref in refs %}
     <div class="ref">
      <div class="refref" ><a href="{{ref.path}}">{{ref.label}}</a></div>
    </div>
    {% endfor %}
    </div>
    </div>
 
           {% if text or title %}
           <div class="textpanel" >
                  <div class="label" > {{ 'texts' | trans }} </div>  
               
                 <div class="edit editbutton first">
                   <a href = "/admin/text/event/{{objid}}"   > {%trans%}edit.text{% endtrans %}</a>
                </div>
            </div>
        {%else%}
            <div  class="notext" >
                <span class="label" > {{ 'no.text' | trans }} </span>
                <a href = "/admin/text/event/{{objid}}" class="editbutton"  > {{ 'add.text' | trans }}</a>
            </div>
        {% endif %}
   
   
     
        <div class="heading" > 
            <div class="label">{{'participants' |trans}}</div>
         <div class="tooltip">?  <span class="tooltiptext">{{ 'to.add.participation.use.bookmarks' | trans }}</span>
       </div>
   </div>     
   {% if participants %}
   <div class="hidebar" > <button onclick="HideMe('pdiv' )">{{'participants' |trans}}</button>
       </div>
    <div id="pdiv" class="participants">
        {% for  key in participants | keys %}
         <div class="participant" > <a href='{{participants[key].link}}' >{{participants[key].label}}</a>  </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div class="hidebar" > 
        <button onclick="HideMe2('pdiv2' )">{{'evenment.enfants' | trans }}</button>
    </div>
  
    <div id="pdiv2" class="children">
    <div class= "subheading" >
      <div class="label"> {{'evenment.enfants'|trans}}</div>
      <div class="editbutton first" >  <a href="/admin/event/detail/-{{event.eventid}}"> {{"edit.event.new" | trans }} </a></div>
    </div>
      {% if event.children %}
      {% set children = event.children %}
      <div class='children' >       
        {% for key in children | keys %}
          <div class="child" >
          <a href='{{children[key]["link"]}}' > {{children[key]['title']}}</a>
          <div class="dates" >{{ children[key]['fstartdate'] }}</div> 
          </div>
        {% endfor %}
      </div>
    {% endif %} 
    </div>
  {% endif %}
  </div>
{% endblock %}

{% block right %}

   {{ render(controller('AppBundle\\Controller\\BookmarkController::setfield'))}}

{% endblock%}
